<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="menu_bar.css">
    <link rel="stylesheet" href="content_recommend.css">
</head>

<body>
    <!-- ë„¤ë¹„ê²Œì´ì…˜ë°” : ë¨¸ë¦¬ë§ ë¶€ë¶„-->
    <div class="menu-top">
        <div class="menu-bar2 menu-bar-item2">
            <!-- ë„¤ë¹„ê²Œì´ì…˜ë°” ë©”ì¸í˜ì´ì§€ -->
            <a href="feelflow_home.html" class="menu-bar1 menu-button menu-bar-item1"><b>FeelFlow</b></a>
            <!-- ë„¤ë¹„ê²Œì´ì…˜ë°” ê¸°íƒ€í˜ì´ì§€ -->
            <div class="menu-bar2">
                <a href="diary_write.html" class="menu-button menu-bar-item2">ìƒˆë¡œìš´ ì¼ê¸°</a>
                <a href="emotion_calendar.html" class="menu-button menu-bar-item2">ê°ì • ìº˜ë¦°ë”</a>
                <a href="#emotion_dash_board" class="menu-button menu-bar-item2">ê°ì •ë¶„ì„ ëŒ€ì‹œë³´ë“œ</a>
                <a href="content_recommend.html" class="menu-button menu-bar-item2">ì½˜í…ì¸  ì¶”ì²œ</a>
                <a href="#matching" class="menu-button menu-bar-item2">ì‚¬ìš©ì ë§¤ì¹­</a>
                <!--ë§ˆì´ë©”ì´ì§€, ì‚¬ìš©ì ì´ë¯¸ì§€ë¡œ ë³€ê²½í•˜ê¸°-->
                <a href="feel_mypage.php" class="menu-button menu-bar2 menu-bar-item2">ë§ˆì´í˜ì´ì§€</a>
            </div>
        </div>
    </div>

    <!-- ì˜¤ëŠ˜ì˜ ê°ì •ë¶„ì„ ê²°ê³¼ ë° ì „ì²´ ì´ìš©ì ê°ì • ì •ë³´ -->
    <section class="red-section">
        <div class="left-content">
            <img src="weather-icon.png" alt="Weather Icon" class="weather-icon">
            <h1 class="today-emotion">ê°ì •</h1>
        </div>
        <div class="right-content">
            <h5>ì˜¤ëŠ˜ ì „ì²´ì´ìš©ì 800ëª…</h5>
            <h3>ì˜¤ëŠ˜ FeelFlow ì´ìš©ìì˜ ê¸°ë¶„ì€ ëŒ€ì²´ì ìœ¼ë¡œ ë§‘ì•„ìš”.</h3>
        </div>
    </section>

    <!-- ê°ì •ë³„ ì½˜í…ì¸  í†µê³„ ë° ì¶”ì²œ ì½˜í…ì¸  ì •ë³´ -->
    <div class="content">
        <!-- ì™¼ìª½ ì„¹ì…˜ -->
        <div class="left-section">
            <div class="chart-section">
                <canvas id="music-statistics"></canvas>
                <canvas id="movie-statistics"></canvas>
            </div>
        </div>

        <!-- Chart.js ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë“œ -->
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
        <script>
            // ê°ì • ë¹„ìœ¨ ë°ì´í„° (ì„ì˜ì˜ ë¹„ìœ¨)
            const emotionLabels = ['Sunny', 'Rainy', 'Normal', 'Lightning', 'Cloudrainy', 'Snow'];
            const musicData = [18, 15, 22, 14, 17, 14]; // ìŒì•… ì½˜í…ì¸ ì˜ ê°ì • ë¹„ìœ¨
            const movieData = [21, 14, 18, 15, 18, 14]; // ì˜í™” ì½˜í…ì¸ ì˜ ê°ì • ë¹„ìœ¨
    
            // ì°¨íŠ¸ ìƒì„± í•¨ìˆ˜
            function createChart(chartId, data, label) {
                new Chart(document.getElementById(chartId), {
                    type: 'pie', // ì›í˜• ì°¨íŠ¸
                    data: {
                        labels: emotionLabels,
                        datasets: [{
                            data: data,
                            backgroundColor: ['#FFD700', '#1E90FF', '#8080802', '#FF4500', '#708090', '#B0E0E6'],
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: {
                                position: 'bottom',
                            },
                            title: {
                                display: true,
                                text: label
                            }
                        }
                    }
                });
            }
    
            // ìŒì•… í†µê³„ ì°¨íŠ¸ ìƒì„±
            createChart('music-statistics', musicData, 'ìŒì•… ì½˜í…ì¸ ì˜ ê°ì • ë¶„í¬');
    
            // ì˜í™” í†µê³„ ì°¨íŠ¸ ìƒì„±
            createChart('movie-statistics', movieData, 'ì˜í™” ì½˜í…ì¸ ì˜ ê°ì • ë¶„í¬');
        </script>

        <!-- ì˜¤ë¥¸ìª½ ì„¹ì…˜ -->
        <div class="right-section">
            <div class="top-content">
                <!-- ì™¼ìª½ í™”ì‚´í‘œ ë²„íŠ¼ -->
                <button class="arrow-btn left" onclick="showPreviousContent()">&#9664;</button>
                <!-- ì„¹ì…˜ ì œëª©ê³¼ ì½˜í…ì¸  -->
                <div class="content-display">
                    <h2>í™”ì°½í•œ ê¸°ë¶„ ì¼ ë•Œ ì¶”ì²œí•˜ëŠ” ì½˜í…ì¸ </h2>
                    <!-- ìŒì•… ì½˜í…ì¸ ì™€ ì˜í™” ì½˜í…ì¸ ë¥¼ ë°˜ë°˜ ë‚˜ëˆ„ì–´ ë°°ì¹˜ -->
                    <div class="content-wrapper">
                        <!-- ê°ì •ë³„ ì¶”ì²œ ìŒì•… ì½˜í…ì¸  ì •ë³´ -->
                        <div class="song-info">
                            <a href="https://www.youtube.com/watch?v=EIz09kLzN9k" target="_blank">
                                <img src="top-song-cover.jpg" alt="Top Song Cover">
                            </a>                            
                            <div class="song-details">
                                <p><strong>Love Lee</strong></p>
                                <p>AKMU</p>
                            </div>
                        </div>
                        <!-- ê°ì •ë³„ ì¶”ì²œ ì˜í™” ì½˜í…ì¸  ì •ë³´ -->
                        <div class="movie-info">
                            <a href="https://serieson.naver.com/v2/movie/72559" target="_blank">
                                <img src="top-movie-cover.jpg" alt="Top Movie Cover">
                            </a>
                            <div class="movie-details">
                                <p><strong>ë‚˜ í™€ë¡œ ì§‘ì—</strong></p>
                                <p>ì—°ì¶œ.Chris Columbus</p>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- ì˜¤ë¥¸ìª½ í™”ì‚´í‘œ ë²„íŠ¼ -->
                <button class="arrow-btn right" onclick="showNextContent()">&#9654;</button>
            </div>
        </div>
    </div>

    <script>
        let currentContentIndex = 0;

        const contentList = [
            {
                title: "í™”ì°½í•œ ê¸°ë¶„ ì¼ ë•Œ ì¶”ì²œí•˜ëŠ” ì½˜í…ì¸ ",
                song: {
                    cover: "top-song-cover.jpg",
                    title: "Love Lee",
                    artist: "AKMU",
                    link: "https://www.youtube.com/watch?v=EIz09kLzN9k"
                },
                movie: {
                    cover: "top-movie-cover.jpg",
                    title: "ë‚˜ í™€ë¡œ ì§‘ì—",
                    director: "ì—°ì¶œ.Chris Columbus",
                    link: "https://serieson.naver.com/v2/movie/72559"
                }
            },
            {
                title: "ì•ˆê°œê°€ ê°€ë“ ë¼ê³  ë¹„ì˜¤ëŠ” ê¸°ë¶„ ì¼ ë•Œ ì¶”ì²œí•˜ëŠ” ì½˜í…ì¸ ",
                song: {
                    cover: "sad-song-cover.jpg",
                    title: "Blue Rain",
                    artist: "Fin.K.L",
                    link: "https://www.youtube.com/watch?v=PZ-rMQtWoTc"
                },
                movie: {
                    cover: "sad-movie-cover.jpg",
                    title: "ì¸ìƒì€ ì•„ë¦„ë‹¤ì›Œ",
                    director: "ì—°ì¶œ.ìµœêµ­í¬",
                    link: "https://serieson.naver.com/v2/movie/536243"
                }
            },
            {
                title: "ë²ˆê°œê°€ ë§ˆêµ¬ì¹˜ëŠ” ê¸°ë¶„ ì¼ ë•Œ ì¶”ì²œí•˜ëŠ” ì½˜í…ì¸ ",
                song: {
                    cover: "angry-song-cover.jpg",
                    title: "Weightless",
                    artist: "Marconi Union",
                    link: "https://www.youtube.com/watch?v=UfcAVejslrU"
                },
                movie: {
                    cover: "angry-movie-cover.jpg",
                    title: "ì¸ì‚¬ì´ë“œ ì•„ì›ƒ",
                    director: "ì—°ì¶œ.Pete Docter",
                    link: "https://serieson.naver.com/v2/movie/107360"
                }
            }
            // ì¶”ê°€ ì½˜í…ì¸ ëŠ” ì´ê³³ì— ì¶”ê°€ ê°€ëŠ¥
            // DBì—ì„œ ì½˜í…ì¸  ì •ë³´ ë¶ˆëŸ¬ì˜¤ê¸° (ì—…ë°ì´íŠ¸ í•„ìš”)
        ];

        function showPreviousContent() {
            currentContentIndex = (currentContentIndex - 1 + contentList.length) % contentList.length;
            updateContent();
        }

        function showNextContent() {
            currentContentIndex = (currentContentIndex + 1) % contentList.length;
            updateContent();
        }

        function updateContent() {
            const content = contentList[currentContentIndex];
            // ì½˜í…ì¸  ì œëª© ì—…ë°ì´íŠ¸
            document.querySelector('.content-display h2').textContent = content.title;
            // ìŒì•… ì •ë³´ ì—…ë°ì´íŠ¸
            document.querySelector('.song-info img').src = content.song.cover;
            document.querySelector('.song-details strong').textContent = content.song.title;
            document.querySelector('.song-details p:nth-child(2)').textContent = content.song.artist;
            // ì˜í™” ì •ë³´ ì—…ë°ì´íŠ¸
            document.querySelector('.movie-info img').src = content.movie.cover;
            document.querySelector('.movie-details strong').textContent = content.movie.title;
            document.querySelector('.movie-details p:nth-child(2)').textContent = content.movie.director;
        }
    </script>

    <!-- ì½˜í…ì¸  ì¢…ë¥˜ ì„ íƒ ë° ì„œì¹˜ -->
    <div class="content-recommendation">
        <!-- ì½˜í…ì¸  ì„ íƒ ë²„íŠ¼ - ìŒì•…, ì˜í™” -->
        <div class="left-content2">
            <a href="content_recommend.html" class="btn-two green rounded">ìŒì•…</a>
            <a href="content_recommend_movie.html" class="btn-two green rounded">ì˜í™”</a>
        </div>
        <!-- ì½˜í…ì¸  ê²€ìƒ‰ì°½ -->
        <div class="right-content2">
            <form action="" method="GET" class="search-form">
                <div class="search">
                    <!-- required ì†ì„±ì´ ì¶”ê°€ëœ ì…ë ¥ í•„ë“œëŠ” ë°˜ë“œì‹œ ì‚¬ìš©ìê°€ ê°’ì„ ì…ë ¥í•´ì•¼ í•˜ë©°, ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ ë¸Œë¼ìš°ì €ê°€ í¼ì„ ì œì¶œí•˜ì§€ ì•Šê³  ê²½ê³  ë©”ì‹œì§€ë¥¼ í‘œì‹œ -->
                    <input type="text" id="searchWord" name="searchWord" placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”." required>
                    <button type="submit" class="searchButton">
                        <img src="https://s3.ap-northeast-2.amazonaws.com/cdn.wecode.co.kr/icon/search.png" alt="ê²€ìƒ‰">
                    </button>
                </div>
            </form>
        </div>
    </div>

<!--

    <?php
    // ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°
    $servername = "localhost";
    $username = "your_username";
    $password = "your_password";
    $dbname = "feelcontent";

    // ê²€ìƒ‰ì–´ê°€ ì œì¶œë˜ì—ˆëŠ”ì§€ í™•ì¸
    if (isset($_GET['searchWord']) && !empty($_GET['searchWord'])) {
        $searchWord = $_GET['searchWord'];

        // ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ìƒì„±
        $conn = new mysqli($servername, $username, $password, $dbname);

        // ì—°ê²° ì²´í¬
        if ($conn->connect_error) {
            die("Connection failed: " . $conn->connect_error);
        }

        // SQL ì¿¼ë¦¬ ì‹¤í–‰ (Prepared Statement ì‚¬ìš©)
        $stmt = $conn->prepare("SELECT * FROM content WHERE title LIKE ? OR description LIKE ?");
        $searchTerm = "%" . $searchWord . "%";  // ê²€ìƒ‰ì–´ì— %ë¥¼ ì¶”ê°€í•˜ì—¬ LIKE ê²€ìƒ‰
        $stmt->bind_param("ss", $searchTerm, $searchTerm);
        $stmt->execute();
        $result = $stmt->get_result();

        if ($result->num_rows > 0) {
            // ê²€ìƒ‰ ê²°ê³¼ ì¶œë ¥
            $contentInfo = ""; // ì½˜í…ì¸  ì •ë³´ë¥¼ ë‹´ì„ ë³€ìˆ˜ (íŒì—…ìš©)

            while ($row = $result->fetch_assoc()) {
                // ì½˜í…ì¸  ì •ë³´ë¥¼ ì €ì¥í•˜ì—¬ íŒì—…ì—ì„œ ì‚¬ìš©
                $contentInfo .= "ì œëª©: " . htmlspecialchars($row['title']) . "\n";
                $contentInfo .= "ì„¤ëª…: " . htmlspecialchars($row['description']) . "\n";
                $contentInfo .= "ì¶”ì²œ ê°ì •: " . htmlspecialchars($row['emotion']) . "\n\n";
            }

            // í•˜ë‚˜ì˜ íŒì—…ì°½ì— ì œëª©, ì„¤ëª…, ê°ì • ì •ë³´ê°€ í‘œì‹œ
            echo "<script>alert('{$contentInfo}');</script>";

        } else {
            // ê²€ìƒ‰ ê²°ê³¼ ì—†ìŒ
            echo "<script>alert('í•´ë‹¹ ì½˜í…ì¸ ëŠ” ì—†ìŠµë‹ˆë‹¤.');</script>";  // ì•Œë¦¼ì°½ìœ¼ë¡œ ì¶œë ¥
        }

        // ì—°ê²° ì¢…ë£Œ
        $stmt->close();
        $conn->close();
    }
    ?>

-->

    <!-- ì½˜í…ì¸ ì˜ ê°ì •ë³„ í”Œë ˆì´ë¦¬ìŠ¤íŠ¸ -->
    <div class="playlist-content">
        <!-- í”Œë ˆì´ë¦¬ìŠ¤íŠ¸ SELECT -->
        <div class="playlist-select">
            <!--SELECT ì˜µì…˜ ì„ íƒ -->
            <div class="selectBox">
                <select name="sentiment" class="select" id="sentimentSelect">
                    <option value="sentiment">sentiment ğŸŒˆ</option>
                    <option value="sunny">sunny</option>
                    <option value="normal">normal</option>
                    <option value="cloudrainy">cloudrainy</option>
                    <option value="snow">snow</option>
                    <option value="rainy">rainy</option>
                    <option value="lightning">lightning</option>
                </select>
                <!--SELECT ì˜µì…˜ - ì¤„ ë‚˜ëˆ”-->
                <span class="icoArrow">
                    <img src="https://freepikpsd.com/media/2019/10/down-arrow-icon-png-7-Transparent-Images.png" alt="">
                </span>
            </div>
        </div>
        <!-- í”Œë ˆì´ë¦¬ìŠ¤íŠ¸ ì„¹ì…˜ -->
        <div class="playlist-section">
            <!-- í”Œë ˆì´ë¦¬ìŠ¤íŠ¸ì˜ ì½˜í…ì¸  ì •ë³´ -->
            <div class="playlist-song-info">
                <a href="https://www.youtube.com/watch?v=EIz09kLzN9k" target="_blank">
                    <img src="top-song-cover.jpg" alt="sunny Song Cover">
                </a>
                <div class="playlist-song-details">
                    <p><strong>Love Lee</strong></p>
                    <p>AKMU</p>
                </div>
            </div>
            <!-- í”Œë ˆì´ë¦¬ìŠ¤íŠ¸ì˜ ì½˜í…ì¸  ì •ë³´ -->
            <div class="playlist-song-info">
                <a href="https://www.youtube.com/watch?v=PZ-rMQtWoTc" target="_blank">
                    <img src="sad-song-cover.jpg" alt="cloudrany Song Cover">
                </a>
                <div class="playlist-song-details">
                    <p><strong>Blue Rain</strong></p>
                    <p>Fin.K.L</p>
                </div>
            </div>
            <!-- í”Œë ˆì´ë¦¬ìŠ¤íŠ¸ì˜ ì½˜í…ì¸  ì •ë³´ -->
            <div class="playlist-song-info">
                <a href="https://www.youtube.com/watch?v=UfcAVejslrU" target="_blank">
                    <img src="angry-song-cover.jpg" alt="lightning Song Cover">
                </a>
                <div class="playlist-song-details">
                    <p><strong>Weightless</strong></p>
                    <p>Marconi Union</p>
                </div>
            </div>
        </div>
    </div>

    <script>
    // selectì˜ ê°’ì´ ë³€ê²½ë  ë•Œë§ˆë‹¤ playlist-song-infoì˜ img ìš”ì†Œì˜ alt ê°’ì„ ê²€ì‚¬í•˜ê³ , ì¡°ê±´ì— ë§ëŠ” ì½˜í…ì¸ ë§Œ í‘œì‹œ
        document.getElementById("sentimentSelect").addEventListener("change", function() {
            var selectedSentiment = this.value; // ì„ íƒëœ ì˜µì…˜ì˜ ê°’
            var songItems = document.querySelectorAll(".playlist-song-info");
        
            songItems.forEach(function(item) {
                var imgAlt = item.querySelector("img").alt; // img ìš”ì†Œì˜ alt ì†ì„± ê°’
        
                // ì„ íƒëœ ê°ì •ì— ë§ëŠ” alt ê°’ì´ í¬í•¨ëœ í•­ëª©ë§Œ í‘œì‹œ
                if (selectedSentiment === "sentiment" || imgAlt.toLowerCase().includes(selectedSentiment.toLowerCase())) {
                    item.style.display = "block";
                } else {
                    item.style.display = "none";
                }
            });
        });
    </script>







    <div class="bottom"></div>
   
</body>